{% extends 'base.html' %}

{% block title %}
DJBourse - Ajouter une transaction
{% endblock title %}

{% block content %}
<div class="container-fluid m-1">
    <div class="col-12">
        <form method="post" class="form-horizontal">
            {% csrf_token %}
            <div class="form-group">
                <label class="font-weight-bold col-sm-2" for="date">Date</label>
                <div class="col-sm-5">
                    <input class="form-control" type="date" id="date"/>
                </div>
            </div>
            <div class="form-group">
                <label class="font-weight-bold col-sm-2" for="quantity">Quantit√©</label>
                <div class="col-sm-5">
                    <input class="form-control" type="text" id="quantity" />
                </div>
            </div>
            <div class="form-group">
                <label class="font-weight-bold col-sm-2" for="stock">Stock</label>
                <div class="col-sm-5">
                    <select class="form-control" id="stock">
                        {% for stock in stocks%}
                        <option value="{{stock.id}}">{{stock.name}} ({{stock.symbol}})</option>
                        {% endfor %}
                    </select>
                    <a href="/stock/create" id="add_stock" onclick="return showAddPopup(this);">Add stock</a>
                </div>
            </div>
            <div class="form-group">
                <label class="font-weight-bold col-sm-2" for="totalValue">Valeur totale</label>
                <div class="col-sm-5">
                    <input class="form-control" type="text" id="totalValue" />
                </div>
            </div>
            <div class="form-group">
                <label class="font-weight-bold col-sm-2" for="quantity">Type</label>
                <div class="col-sm-5">
                    <select class="form-control" id="typeTransaction">
                        {% for type_transaction in types_transaction %}
                        <option value="{{type_transaction.0}}">{{type_transaction.0}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
              <input type="submit" class="btn btn-primary" value="Ajouter" />
            </div>
        </form>
    </div>
</div>
<script>
    function showAddPopup(triggeringLink) {
    var name = triggeringLink.id.replace(/^add_/, '');
    href = triggeringLink.href;
    var win = window.open(href, name, 'height=300,width=500,resizable=yes,scrollbars=yes');
    win.focus();
    return false;
    }
    function closePopup(win, newID, newRepr, id) {
        $(id).append('<option value=' + newID + ' selected >' + newRepr + '</option>')
        win.close();
    }
</script>
{% endblock content %}